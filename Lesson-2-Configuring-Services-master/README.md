Lesson 2: Configuring Services


Para conseguir la injeccion de dependencias:

- Primero se crea la clase. Por ejemplo:
public class Logger : ILogger
    {
        string _fileName;

        public Logger()
        {
            _fileName = $"{DateTime.UtcNow.ToString("yyyy-dd-MM--HH-mm-ss")}.log";
        }

        public void Log(string logData)
        {
            File.AppendAllText(_fileName, $"{DateTime.UtcNow}: {logData}");
        }
    }
    
- Luego se refactoriza y se añade el interfaz a esa clase.
public interface ILogger
    {
        void Log(string logData);
    }
    
- En el servicio se añade el singleton
      AddSingleton<ILogger, Logger>();
       

- Por último. Esto hace que se pueda usar el método Log de la clase, que se ha implementado del Interface, sin tener que instanciar el obejto de la clase:

 app.Run(async (context) =>
            {
                logger.Log("Logged line");
                await context.Response.WriteAsync("This text was generated by the app.Run middleware.");
            });
  
 ![image-20201119003655474](https://github.com/JuanjoSalva/Lesson-2-Configuring-Services/blob/master/images/image-20201119003655474.png)
